{
  "cmd": "FileWriter_new",
  "broker": "dmsc-kafka01",
  "job_id": "96cee528-3bba-11ea-8d5c-9801a7b1962b",
  "file_attributes": {
    "file_name": "placeholder_name.nxs"
  },
  "nexus_structure": {
    "children": [
      {
        "type": "group",
        "name": "entry",
        "children": [
          {
            "type": "group",
            "name": "instrument",
            "children": [
              {
                "type": "group",
                "name": "detector",
                "children": [
                  {
                    "type": "dataset",
                    "name": "depends_on",
                    "dataset": {
                      "type": "string"
                    },
                    "values": "/entry/instrument/detector/transformations/Translation"
                  },
                  {
                    "type": "dataset",
                    "name": "description",
                    "dataset": {
                      "type": "string"
                    },
                    "values": "A test detector."
                  },
                  {
                    "type": "dataset",
                    "name": "detector_number",
                    "dataset": {
                      "type": "int64",
                      "size": [
                        1,
                        1
                      ]
                    },
                    "values": [
                      [
                        0
                      ]
                    ]
                  },
                  {
                    "type": "group",
                    "name": "events",
                    "children": [
                      {
                        "type": "stream",
                        "stream": {
                          "source": "Gamma_detector_Adc0_Ch0",
                          "topic": "Ymir_detector",
                          "writer_module": "ev42"
                        }
                      }
                    ]
                  },
                  {
                    "type": "group",
                    "name": "transformations",
                    "children": [
                      {
                        "type": "dataset",
                        "name": "Translation",
                        "dataset": {
                          "type": "double"
                        },
                        "values": 1.0,
                        "attributes": [
                          {
                            "name": "depends_on",
                            "values": "."
                          },
                          {
                            "name": "transformation_type",
                            "values": "translation"
                          },
                          {
                            "name": "units",
                            "values": "m"
                          },
                          {
                            "name": "vector",
                            "values": [
                              0.0,
                              0.0,
                              1.0
                            ]
                          }
                        ]
                      }
                    ],
                    "attributes": [
                      {
                        "name": "NX_class",
                        "values": "NXtransformations"
                      }
                    ]
                  },
                  {
                    "type": "group",
                    "name": "waveforms",
                    "children": [
                      {
                        "type": "stream",
                        "stream": {
                          "source": "Gamma_detector_Adc0_Ch0_waveform",
                          "topic": "Ymir_detector",
                          "writer_module": "senv"
                        }
                      }
                    ]
                  },
                  {
                    "type": "dataset",
                    "name": "x_pixel_offset",
                    "dataset": {
                      "type": "double",
                      "size": [
                        1,
                        1
                      ]
                    },
                    "values": [
                      [
                        0.0
                      ]
                    ]
                  },
                  {
                    "type": "dataset",
                    "name": "y_pixel_offset",
                    "dataset": {
                      "type": "double",
                      "size": [
                        1,
                        1
                      ]
                    },
                    "values": [
                      [
                        0.0
                      ]
                    ]
                  },
                  {
                    "type": "dataset",
                    "name": "z_pixel_offset",
                    "dataset": {
                      "type": "double",
                      "size": [
                        1,
                        1
                      ]
                    },
                    "values": [
                      [
                        0.0
                      ]
                    ]
                  }
                ],
                "attributes": [
                  {
                    "name": "NX_class",
                    "values": "NXdetector"
                  },
                  {
                    "name": "has_link",
                    "values": false
                  }
                ]
              },
              {
                "type": "group",
                "name": "mini-chopper",
                "children": [
                  {
                    "type": "dataset",
                    "name": "depends_on",
                    "dataset": {
                      "type": "string"
                    },
                    "values": "/entry/instrument/mini-chopper/transformations/Translation"
                  },
                  {
                    "type": "dataset",
                    "name": "description",
                    "dataset": {
                      "type": "string"
                    },
                    "values": "The mini-chopper."
                  },
                  {
                    "type": "group",
                    "name": "frequency_setting",
                    "children": [
                      {
                        "type": "stream",
                        "stream": {
                          "source": "LabS-VIP:Chop-Drv-0101:Spd_SP",
                          "topic": "Ymir_chopper",
                          "type": "double",
                          "writer_module": "f142"
                        }
                      }
                    ]
                  },
                  {
                    "type": "group",
                    "name": "status",
                    "children": [
                      {
                        "type": "stream",
                        "stream": {
                          "source": "LabS-VIP:Chop-Drv-0101:Chop_Stat",
                          "topic": "Ymir_chopper",
                          "type": "int",
                          "writer_module": "f142"
                        }
                      }
                    ]
                  },
                  {
                    "type": "group",
                    "name": "tdc_timestamp",
                    "children": [
                      {
                        "type": "stream",
                        "stream": {
                          "source": "LabS-Utgard-VIP:Chop-Drv-0101:TDC_array",
                          "topic": "Ymir_chopper",
                          "writer_module": "tdct"
                        }
                      }
                    ]
                  },
                  {
                    "type": "group",
                    "name": "transformations",
                    "children": [
                      {
                        "type": "dataset",
                        "name": "Translation",
                        "dataset": {
                          "type": "double"
                        },
                        "values": 1.0,
                        "attributes": [
                          {
                            "name": "depends_on",
                            "values": "."
                          },
                          {
                            "name": "transformation_type",
                            "values": "translation"
                          },
                          {
                            "name": "units",
                            "values": "m"
                          },
                          {
                            "name": "vector",
                            "values": [
                              0.0,
                              0.0,
                              -1.0
                            ]
                          }
                        ]
                      }
                    ],
                    "attributes": [
                      {
                        "name": "NX_class",
                        "values": "NXtransformations"
                      }
                    ]
                  }
                ],
                "attributes": [
                  {
                    "name": "NX_class",
                    "values": "NXdisk_chopper"
                  },
                  {
                    "name": "has_link",
                    "values": false
                  }
                ]
              }
            ],
            "attributes": [
              {
                "name": "NX_class",
                "values": "NXinstrument"
              }
            ]
          },
          {
            "type": "group",
            "name": "sample",
            "children": [
              {
                "type": "dataset",
                "name": "description",
                "dataset": {
                  "type": "string"
                },
                "values": "Some sample description."
              },
              {
                "type": "group",
                "name": "x_set_position",
                "children": [
                  {
                    "type": "stream",
                    "stream": {
                      "source": "SES-SCAN:MC-MCU-001:m1.VAL",
                      "topic": "Ymir_motion",
                      "type": "double",
                      "writer_module": "f142"
                    }
                  }
                ]
              },
              {
                "type": "group",
                "name": "x_status",
                "children": [
                  {
                    "type": "stream",
                    "stream": {
                      "source": "SES-SCAN:MC-MCU-001:m1.STAT",
                      "topic": "Ymir_motion",
                      "type": "int",
                      "writer_module": "f142"
                    }
                  }
                ]
              },
              {
                "type": "group",
                "name": "x_translation",
                "children": [
                  {
                    "type": "stream",
                    "stream": {
                      "source": "SES-SCAN:MC-MCU-001:m1.RBV",
                      "topic": "Ymir_motion",
                      "type": "double",
                      "writer_module": "f142"
                    }
                  }
                ]
              },
              {
                "type": "group",
                "name": "y_set_position",
                "children": [
                  {
                    "type": "stream",
                    "stream": {
                      "source": "SES-SCAN:MC-MCU-001:m2.VAL",
                      "topic": "Ymir_motion",
                      "type": "double",
                      "writer_module": "f142"
                    }
                  }
                ]
              },
              {
                "type": "group",
                "name": "y_status",
                "children": [
                  {
                    "type": "stream",
                    "stream": {
                      "source": "SES-SCAN:MC-MCU-001:m2.STAT",
                      "topic": "Ymir_motion",
                      "writer_module": "ev42"
                    }
                  }
                ]
              },
              {
                "type": "group",
                "name": "y_translation",
                "children": [
                  {
                    "type": "stream",
                    "stream": {
                      "source": "SES-SCAN:MC-MCU-001:m2.RBV",
                      "topic": "Ymir_motion",
                      "type": "double",
                      "writer_module": "f142"
                    }
                  }
                ]
              },
              {
                "type": "group",
                "name": "z_set_position",
                "children": [
                  {
                    "type": "stream",
                    "stream": {
                      "source": "SES-SCAN:MC-MCU-001:m3.VAL",
                      "topic": "Ymir_motion",
                      "type": "double",
                      "writer_module": "f142"
                    }
                  }
                ]
              },
              {
                "type": "group",
                "name": "z_status",
                "children": [
                  {
                    "type": "stream",
                    "stream": {
                      "source": "SES-SCAN:MC-MCU-001:m3.STAT",
                      "topic": "Ymir_motion",
                      "type": "double",
                      "writer_module": "f142"
                    }
                  }
                ]
              },
              {
                "type": "group",
                "name": "z_translation",
                "children": [
                  {
                    "type": "stream",
                    "stream": {
                      "source": "SES-SCAN:MC-MCU-001:m3.RBV",
                      "topic": "Ymir_motion",
                      "type": "double",
                      "writer_module": "f142"
                    }
                  }
                ]
              }
            ],
            "attributes": [
              {
                "name": "NX_class",
                "values": "NXsample"
              },
              {
                "name": "has_link",
                "values": false
              }
            ]
          }
        ],
        "attributes": [
          {
            "name": "NX_class",
            "values": "NXentry"
          }
        ]
      }
    ]
  }
}
