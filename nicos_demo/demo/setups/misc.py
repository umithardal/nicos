description = 'miscellaneous devices'
group = 'optional'

includes = ['system']

devices = dict(
    m1 = device('nicos.devices.generic.VirtualMotor',
        lowlevel = True,
        #loglevel = 'debug',
        abslimits = (-100, 100),
        userlimits = (0, 50),
        speed = 0.5,
        unit = 'deg',
    ),
    m2 = device('nicos.devices.generic.VirtualMotor',
        lowlevel = True,
        loglevel = 'debug',
        abslimits = (-100, 100),
        speed = 1,
        unit = 'deg',
    ),
    c1 = device('nicos.devices.generic.VirtualCoder',
        lowlevel = True,
        motor = 'm1',
    ),
    a1 = device('nicos.devices.generic.Axis',
        description = 'demo axis',
        motor = 'm1',
        coder = 'c1',
        obs = ['c1'],
        abslimits = (0, 100),
        precision = 0,
        pollinterval = 0.5,
    ),
    a2 = device('nicos.devices.generic.Axis',
        description = 'demo axis #2',
        motor = 'm2',
        precision = 0,
        abslimits = (0, 100),
    ),
    a3 = device('nicos.devices.generic.Axis',
        description = 'demo axis #3',
        motor = device('nicos.devices.generic.VirtualMotor',
            abslimits = (-100, 100),
            speed = 1,
            unit = 'deg',
        ),
        precision = 0,
    ),
    sw = device('nicos.devices.generic.Switcher',
        description = 'demo switcher',
        moveable = 'a2',
        mapping = {'in': 1,
                   'out': 0},
        precision = 0,
    ),
    ap = device('nicos.devices.generic.DeviceAlias',
        alias = 'a1',
        devclass = 'nicos.core.Moveable',
    ),
    a1speed = device('nicos.devices.generic.ParamDevice',
        description = 'sets the speed of a1 on move()',
        device = 'a1',
        parameter = 'speed',
    ),
    sxl = device('nicos.devices.generic.VirtualMotor',
        description = 'left slit motor',
        abslimits = (-20, 40),
        unit = 'mm',
    ),
    sxr = device('nicos.devices.generic.VirtualMotor',
        description = 'right slit motor',
        abslimits = (-40, 20),
        unit = 'mm',
    ),
    sxb = device('nicos.devices.generic.VirtualMotor',
        description = 'bottom slit motor',
        abslimits = (-50, 30),
        unit = 'mm',
    ),
    sxt = device('nicos.devices.generic.VirtualMotor',
        description = 'top slit motor',
        abslimits = (-30, 50),
        unit = 'mm',
    ),
    slit = device('nicos.devices.generic.Slit',
        description = '4-blade slit',
        left = 'sxl',
        right = 'sxr',
        bottom = 'sxb',
        top = 'sxt',
    ),
    mm = device('nicos.devices.generic.ManualMove',
        description = 'manual move demo',
        abslimits = (0, 100),
        unit = 'mm',
    ),
    msw = device('nicos.devices.generic.ManualSwitch',
        description = 'manual switch demo',
        states = ['unknown', 'on', 'off'],
        requires = {'level': 10},
    ),
    mfh_mot = device('nicos_mlz.panda.devices.rot_axis.VirtualRotAxisMotor',
        abslimits = (-360, 360),
        unit = 'deg',
        speed = 20,
        jitter = 0.1,
        lowlevel = True,
    ),
    mfh = device('nicos_mlz.panda.devices.rot_axis.RotAxis',
        description = 'horizontal focus for the monochromator',
        abslimits = (-360, 360),
        unit = 'deg',
        refpos = 220,
        refspeed = 1,
        autoref = -10,
        wraparound = 360,
        precision = 0.1,
        motor = 'mfh_mot',
    ),
    ld = device('nicos.devices.generic.LockedDevice',
        description = 'demo locked device',
        device = 'a1',
        lock = 'a2',
        lockvalue = 10,
        unlockvalue = 20,
        loglevel = 'debug',
    ),
)
