description = '3He/4He dilution unit from FRM II Sample environment group'

group = 'plugplay'

includes = ['alias_T']

nethost = setupname

tango_base = "tango://%s:10000/box/lakeshore/" % setupname

devices = {
    'T_%s' % setupname: device('nicos.devices.tango.TemperatureController',
        description = 'The control device of the mixing chamber',
        tangodevice = tango_base + 'control',
        abslimits = (0, 300),
        unit = 'K',
        fmtstr = '%.3f',
        pollinterval = 5,
        maxage = 6,
    ),
    'T_%s_A' % setupname: device('nicos.devices.tango.Sensor',
        description = 'The mixing chamber temperature',
        tangodevice = tango_base + 'sensora',
        unit = 'K',
        fmtstr = '%.3f',
        pollinterval = 5,
        maxage = 6,
    ),
    'T_%s_heaterrange_A' % setupname: device('nicos.devices.generic.Switcher',
        description = 'Heater range of A',
        moveable = device('nicos.devices.tango.AnalogOutput',
            tangodevice = tango_base + 'heaterrange_a',
            description = '',
            lowlevel = True,
            unit = '',),
        precision = 0.5,
        mapping = {'off': 0, '31.6 uA': 1, '100 uA': 2, '316 uA': 3, '1.00 mA': 4,
                   '3.16 mA': 5, '10.0 mA': 6, '31.6 mA': 7, '100 mA': 8},
    ),
    'T_%s_B' % setupname: device('nicos.devices.tango.Sensor',
        description = 'The still temperature)',
        tangodevice = tango_base + 'sensorb',
        unit = 'K',
        fmtstr = '%.3f',
        pollinterval = 5,
        maxage = 6,
    ),
    'T_%s_heaterrange_B' % setupname: device('nicos.devices.generic.Switcher',
        description = 'Heater range of B',
        moveable = device('nicos.devices.tango.AnalogOutput',
            tangodevice = tango_base + 'heaterrange_b',
            description = '',
            lowlevel = True,
            unit = '',),
        precision = 0.5,
        mapping = {'off': 0, 'on': 1,},
    ),
    'T_%s_C' % setupname: device('nicos.devices.tango.Sensor',
        description = 'The sample temperature (if installed)',
        tangodevice = tango_base + 'sensor5',
        unit = 'K',
        fmtstr = '%.3f',
        pollinterval = 5,
        maxage = 6,
    ),
    'T_%s_D' % setupname: device('nicos.devices.tango.Sensor',
        description = 'The sample temperature (if installed)',
        tangodevice = tango_base + 'sensor6',
        unit = 'K',
        fmtstr = '%.3f',
        pollinterval = 5,
        maxage = 6,
    ),
    '%s_still_heater' % setupname: device('nicos.devices.tango.AnalogOutput',
        description = 'Still heating',
        tangodevice = tango_base + 'still',
        fmtstr = '%.1f',
        unit = '%',
    ),
    '%s_pStill' % setupname: device('nicos.devices.taco.AnalogInput',
        description = 'Pressure turbo pump inlet',
        tacodevice = '//%s/box/inficon/gauge1' % nethost,
        fmtstr = '%.4g',
        pollinterval = 15,
        maxage = 20,
    ),
    '%s_pInlet' % setupname: device('nicos.devices.taco.AnalogInput',
        description = 'Pressure forepump inlet',
        tacodevice = '//%s/box/module/gauge2' % nethost,
        fmtstr = '%.4g',
        pollinterval = 15,
        maxage = 20,
    ),
    '%s_pOutlet' % setupname: device('nicos.devices.taco.AnalogInput',
        description = 'Pressure forepump outlet',
        tacodevice = '//%s/box/module/gauge3' % nethost,
        fmtstr = '%.4g',
        pollinterval = 15,
        maxage = 20,
    ),
    '%s_pKond' % setupname: device('nicos.devices.taco.AnalogInput',
        description = 'Pressure compressor outlet',
        tacodevice = '//%s/box/module/gauge4' % nethost,
        fmtstr = '%.4g',
        pollinterval = 15,
        maxage = 20,
    ),
    '%s_pTank' % setupname: device('nicos.devices.taco.AnalogInput',
        description = 'Pressure dump/tank',
        tacodevice = '//%s/box/module/gauge5' % nethost,
        fmtstr = '%.4g',
        pollinterval = 15,
        maxage = 20,
    ),
    '%s_pVac' % setupname: device('nicos.devices.taco.AnalogInput',
        description = 'Pressure vacuum dewar',
        tacodevice = '//%s/box/inficon/gauge6' % nethost,
        fmtstr = '%.4g',
        pollinterval = 15,
        maxage = 20,
    ),
    '%s_flow' % setupname: device('nicos.devices.taco.AnalogInput',
        description = 'Gas flow',
        tacodevice = '//%s/box/module/flow' % nethost,
        fmtstr = '%.4g',
        unit = 'mln/min',
        pollinterval = 15,
        maxage = 20,
    ),
}

alias_config = {
    'T':  {'T_%s' % setupname: 300},
    'Ts': {'T_%s_A' % setupname: 300, 'T_%s_B' % setupname: 280,
           'T_%s_C' % setupname: 290, 'T_%s_D' % setupname: 270},
}
